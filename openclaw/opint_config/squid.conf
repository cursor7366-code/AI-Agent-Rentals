# OpenClaw Egress Proxy - Deny-all default, allowlist only
# DO NOT MODIFY without Owner approval

http_port 3128

# Load allowed domains from file
acl allowed_domains dstdomain "/etc/squid/allowed_domains.txt"

# Allow CONNECT method for HTTPS
acl SSL_ports port 443
acl CONNECT method CONNECT

# Only allow CONNECT to SSL ports
http_access deny CONNECT !SSL_ports

# Allow requests to whitelisted domains only
http_access allow allowed_domains

# Deny everything else (this is the security boundary)
http_access deny all

# Logging for audit
access_log daemon:/var/log/squid/access.log squid
cache_log /var/log/squid/cache.log

# Disable caching (we want fresh data)
cache deny all
